{% load static %}
<!DOCTYPE html>
<html>
<head>
  <title>{% block title %}{% endblock %}</title>
  <link href="{% static "css/blog.css" %}" rel="stylesheet">

</head>
<body>
 <div id="header">
 <span class="logo"><a href="http://127.0.0.1:8000/TD/">ЮЖК</a></span>
     {% if request.user.is_authenticated %}
        <ul class="menu">
            <li {% if section == "dashboard" %}class="selected"{% endif %}>
                <a href="{% url "account:dashboard" %}">My dashboard</a>
            </li>
            <li {% if section == "all_my_ticket" %}class="selected"{% endif %}>
                <a href="{% url 'tickets:ticket_list' %}">all my ticket</a>
            </li>
            <li {% if section == "user_documents_and_folders" %}class="selected"{% endif %}>
                <a href="{% url 'TD:user_documents_and_folders' %}">My Documents &amp; Folders</a>
            </li>
            <li {% if section == "documents_by_department" %}class="selected"{% endif %}>
                <a href="{% url 'TD:documents_by_department' %}">My Department Documents &amp; Folders</a>
            </li>
            <li {% if section == "images" %}class="selected"{% endif %}>
                <a href="#">Images</a>
            </li>
            <li {% if section == "people" %}class="selected"{% endif %}>
            <a href="#">People</a>
            </li>
        </ul>
     {% endif %}
    <span class="user">
        {% if request.user.is_authenticated %}
        Hello {{ request.user.first_name|default:request.user.username }},
    <form action="{% url "account:logout" %}" method="post">
        <button type="submit">Logout</button>
        {% csrf_token %}
    </form>
        {% else %}
        <a href="{% url "account:login" %}">Log-in</a>
        {% endif %}
    </span>

 </div>
 <div id="message-container" class="message-container">
    {% if messages %}
        {% for message in messages %}
            <div class="message-popup alert-{{ message.tags }}">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}
</div>
 <div id="content">
 {% block content %}
 {% endblock %}
 </div>
</body>
</html>

<script>
    // Автоматически скрываем сообщение через 3 секунды
    document.addEventListener("DOMContentLoaded", function () {
        let messages = document.querySelectorAll(".message-popup");
        messages.forEach(function (msg) {
            setTimeout(() => {
                msg.style.opacity = "0";
                setTimeout(() => msg.remove(), 500); // Удаление после исчезновения
            }, 3000);
        });
    });
</script>

<style>
    .message-container {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1000;
    }
    .message-popup {
        background-color: #333;
        color: white;
        padding: 15px;
        border-radius: 5px;
        margin-bottom: 10px;
        opacity: 1;
        transition: opacity 0.5s ease-in-out;
    }
    .alert-success { background-color: #28a745; }
    .alert-error { background-color: #dc3545; }
    .alert-warning { background-color: #ffc107; color: black; }
    .alert-info { background-color: #17a2b8; }
</style>